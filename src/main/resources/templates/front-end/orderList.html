<!doctype html>
<html class="no-js" lang="zxx">
<head>
<!-- Meta Tags -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="keywords" content="Site keywords here">
<meta name="description" content="">
<meta name='copyright' content=''>
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Title -->
<title>寵愛牠 PawCares</title>
<link rel="icon" th:href="@{/images/logo.png}">
<!-- Google Fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
	rel="stylesheet">

<!-- Bootstrap CSS -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
<!-- Nice Select CSS -->
<link rel="stylesheet" th:href="@{/css/nice-select.css}">
<!-- Font Awesome CSS -->
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
<!-- icofont CSS -->
<link rel="stylesheet" th:href="@{/css/icofont.css}">
<!-- Slicknav -->
<link rel="stylesheet" th:href="@{/css/slicknav.min.css}">
<!-- Owl Carousel CSS -->
<link rel="stylesheet" th:href="@{/css/owl-carousel.css}">
<!-- Datepicker CSS -->
<link rel="stylesheet" th:href="@{/css/datepicker.css}">
<!-- Animate CSS -->
<link rel="stylesheet" th:href="@{/css/animate.min.css}">
<!-- Magnific Popup CSS -->
<link rel="stylesheet" th:href="@{/css/magnific-popup.css}">

<!-- Medipro CSS -->
<link rel="stylesheet" th:href="@{/css/normalize.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet" th:href="@{/css/responsive.css}">
<link rel="stylesheet" th:href="@{/css/add.css}">
<link rel="stylesheet" th:href="@{/css/orderlist.css}">
</head>
<body>

	<!-- Preloader -->
	<div class="preloader">
		<div class="loader">
			<div class="indicator">
				<svg width="50" height="50" viewBox="0 0 50 50"
					xmlns="http://www.w3.org/2000/svg">
                        <!-- 背景圓形 -->
                        <circle cx="25" cy="25" r="24" fill="#889D75"
						stroke="white" stroke-width="2" />
                        <animate attributeName="opacity" values="0;1;0"
						dur="0.5s" repeatCount="indefinite" />
                        <!-- 更扁平的愛心形狀 -->
                        <path
						d="M25,17.5 C32.5,5 42.5,20 25,30 C7.5,20 17.5,5 25,17.5 Z"
						fill="none" stroke="white" stroke-width="2" stroke-linecap="round"
						stroke-linejoin="round" stroke-dasharray="100"
						stroke-dashoffset="100">
                          <animate attributeName="stroke-dashoffset"
						from="100" to="0" dur="0.5s" repeatCount="indefinite" />
                        </path>
                    
                        <!-- 腳趾小圓 --> 
                        <circle cx="15" cy="35" r="3.5" fill="none"
						stroke="white" stroke-width="2">
                          <animate attributeName="opacity"
						values="0;1;0" dur="0.5s" repeatCount="indefinite" />
                        </circle>
                        <circle cx="25" cy="37.5" r="3.5" fill="none"
						stroke="white" stroke-width="2">
                          <animate attributeName="opacity"
						values="1;0;1" dur="0.5s" repeatCount="indefinite" />
                        </circle>
                        <circle cx="35" cy="35" r="3.5" fill="none"
						stroke="white" stroke-width="2">
                          <animate attributeName="opacity"
						values="0;1;0" dur="0.5s" repeatCount="indefinite" />
                        </circle>
                    </svg>
			</div>
		</div>
	</div>
	<!-- End Preloader -->

	<!-- Get Pro Button -->


	<!-- Header Area -->
	<header class="header">
		<!-- Topbar -->
		<div class="topbar">
			<div class="container">
				<div class="row">
					<div class="col-lg-6 col-md-5 col-12"></div>
					<div class="col-lg-6 col-md-7 col-12">
						<!-- Top Contact -->
						<ul class="top-contact">
							<li><i class="icofont-paw"></i>Hi,<span
								th:text="${session.memName}"></span>!</li>
							<li><a th:href="@{/member}"><i class="icofont-ui-user"></i>會員資料</a></li>
						</ul>
						<!-- End Top Contact -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Topbar -->
		<!-- Header Inner -->
		<div class="header-inner">
			<div class="container">
				<div class="inner">
					<div class="row">
						<div class="col-lg-3 col-md-3 col-12">
							<!-- Start Logo -->
							<div class="logo">
								<a th:href="@{/}"><img th:src="@{/images/title.png}" alt="#"></a>
							</div>
							<!-- End Logo -->
							<!-- Mobile Nav -->
							<div class="mobile-nav"></div>
							<!-- End Mobile Nav -->
						</div>
						<div class="col-lg-7 col-md-9 col-12">
							<!-- Main Menu -->
							<div class="main-menu">

								<nav class="navigation">
									<ul class="nav menu">
										<li><a th:href="@{/aboutUs}">關於我們</a></li>
										<li><a th:href="@{/joinus}">加入我們 </a></li>
										<li><a th:href="@{/questionAndAnswer}">常見問題 </a></li>
										<li class="active"><a th:href="@{/orderList}">訂單檢視 </a></li>
										<li><a th:href="@{/}">首頁</a>
									</ul>
								</nav>
							</div>
							<!--/ End Main Menu -->
						</div>
						<div class="col-lg-2 col-12">
							<div class="get-quote">
								<a th:href="@{/appointment}" class="btn">預約服務</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Header Inner -->
	</header>
	<!-- End Header Area -->
	<div class="breadcrumbs overlay">
		<div class="container">
			<div class="bread-inner">
				<div class="row">
					<div class="col-12">
						<h2>訂單檢視</h2>
						<ul class="bread-list">
							<li><i class="icofont-simple-right"></i></li>
							<li class="active">Order List</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container1">
		<div class="container2">
			<div class="pageSize box">
				<div class="pagetitle" id="paginationWrapper2">
					<label for="pageSize" class="pagetitle1">每頁顯示數量&nbsp;&nbsp;&nbsp;</label><select
						id="pageSize" onchange="updatePageSize()">
						<option th:value="5" th:selected="${pageSize == 5}">5</option>
						<option th:value="10" th:selected="${pageSize == 10}">10</option>
						<option th:value="15" th:selected="${pageSize == 15}">15</option>
					</select>
				</div>
			</div>
			<div class="search box">
				<label class="search" for="searchInput">搜尋訂單</label> <input
					type="text" id="searchInput" oninput="searchOrders()"
					placeholder="輸入關鍵字搜尋訂單">
			</div>
		</div>
		<table id="orderTable">
			<thead>
				<tr>
					<th onclick="sortOrders('orderId')">訂單編號 <i
						class="icofont-sort"></i>
					</th>
					<th onclick="sortOrders('orderDate')">訂單時間 <i
						class="icofont-sort"></i>
					</th>
					<th>上車地點<i class="icofont-arrow-right"></i>下車地點
					</th>
					<th>服務人員</th>
					<th onclick="sortOrders('status')">訂單狀態<i class="icofont-sort"></i></th>
					<th>訂單詳情</th>
				</tr>
			</thead>
			<tbody th:fragment="orderTableBody">
				<tr th:if="${#lists.isEmpty(orderList)}">
					<td colspan="6" class="text-center text-muted">🐾
						目前尚無任何訂單紀錄，快來預約你的寵物旅程吧! 🐾</td>
				</tr>
				<tr th:each="order : ${orderList}">
					<td th:text="${order.orderId}"></td>
					<td style="width:140px;"><span th:text="${order.notes}"></span></td>
					<td><span th:text="${order.onLocation}"></span><br> <i
						class="icofont-arrow-right"></i><span
						th:text="${order.offLocation}"></span></td>

					<td th:text="${order.staff.staffName}"></td>
					<td th:utext="${order.status == 0 ? '已取消' : order.status == 1 ? '已付款<br>尚未搭乘' : order.status == 2 ? '已完成訂單' : '未付款'}"></td>

					<td><button type="button" class="check"
							th:data-id="${order.orderId}">
							<i class="icofont-paw"></i>檢視
						</button></td>
				</tr>
			</tbody>
		</table>

		<div>
			<div id="paginationWrapper">
				<nav>
					<ul class="pagination justify-content-center"
						th:if="${totalPages > 0}">
						<!-- 上一頁 -->
						<li class="page-item"
							th:classappend="${currentPage == 1} ? 'disabled'"><a
							class="page-link"
							th:href="@{/orderList(page=${currentPage == 1 ? 1 : currentPage - 1}, pageSize=${pageSize})}">上一頁</a>
						</li>

						<!-- 頁碼清單（前2後2） -->
						<li class="page-item"
							th:each="i : ${#numbers.sequence(
            (currentPage - 2) < 1 ? 1 : (currentPage - 2),
            (currentPage + 2) > totalPages ? totalPages : (currentPage + 2))}"
							th:classappend="${i == currentPage} ? 'active'"><a
							class="page-link page-num"
							th:href="@{/orderList(page=${i}, pageSize=${pageSize})}"
							th:text="${i}"></a></li>

						<!-- 下一頁 -->
						<li class="page-item"
							th:classappend="${currentPage == totalPages} ? 'disabled'">
							<a class="page-link"
							th:href="@{/orderList(page=${currentPage == totalPages ? totalPages : currentPage + 1}, pageSize=${pageSize})}">下一頁</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</div>

	<!--/ End Feautes -->
	<!-- 詳細資料 Modal -->
	<div class="modal fade" id="orderDetailModal" tabindex="-1"
		aria-labelledby="orderDetailModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-title" id="orderDetailModalLabel">訂單明細</div>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="關閉">x</button>
				</div>
				<div class="modal-body">

					<table class="detailtable">
						<tr>
							<td class="clo">訂單編號</td>
							<td id="orderId"></td>
							<td class="clo">訂單狀態</td>
							<td id="orderStatus"></td>
						</tr>
						<tr>
							<td class="clo">總花費金額</td>
							<td id="payment"></td>
							<td class="clo">服務寵物</td>
							<td id="petName"></td>
						</tr>
						<tr>
							<td class="clo">預約日期時間</td>
							<td id="appointmentTime"></td>
							<td class="clo">訂單建立時間</td>
							<td id="createdTime"></td>

						</tr>
						<tr>
							<td class="clo">上車地點</td>
							<td colspan="3" id="onLocation"></td>
						</tr>
						<tr>
							<td class="clo">下車地點</td>
							<td colspan="3" id="offLocation"></td>
						</tr>
						<tr>
							<td class="clo">車牌號碼</td>
							<td id="carNumber"></td>
							<td class="clo">服務人員</td>
							<td id="staffName"></td>
						</tr>

						<tr>
							<td class="clo">支付方式</td>
							<td id="payMethod"></td>
							<td class="clo">使用點數</td>
							<td id="point"></td>
						</tr>
						<tr>
							<td class="clo">訂單備註</td>
							<td colspan="3" class="clonote" id="notes"></td>
						<tr>
						<tr>
							<td class="clo">訂單評論</td>
							<td colspan="3" class="clonote" id="rating"></td>
						</tr>
					</table>

					<div class="backandcancel mt-3 d-flex justify-content-between">
						<button class="gobackbtn btn-secondary" data-bs-dismiss="modal">返回</button>
						<form method="get" action="/order/cancelOrder">
							<button type="button" class="cancelOrderBtn">取消訂單</button>
							<input type="hidden" name="orderId" id="cancelOrderId">
						</form>
						<!-- 評價按鈕區：預設都隱藏 -->
						<div class="review-action">
							<button id="reviewBtn" class="commentBtn" style="display: none;">我要評價</button>
							<span id="ratedBadge" class="commentok" style="display: none;">已評價</span>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
	<!-- ✨ 訂單取消自訂彈窗 Overlay HTML -->
	<div id="customCancelOverlay" class="cancel-overlay"
		style="display: none;">
		<div class="cancel-dialog">
			<p class="cancel-text">確定要取消訂單嗎？</p>
			<p style="margin-bottom: 25px">
				已付款項與點數<br>將會以點數形式退還至您的帳戶<br>
			</p>
			<div class="cancel-btn-group">
				<button id="cancelDismissBtn" class="cancel-btn cancel-cancel">取消</button>
				<button id="confirmCancelSubmitBtn"
					class="cancel-btn cancel-confirm">確認</button>
			</div>
		</div>
	</div>

	<!-- 成功取消訂單 Modal -->
	<div class="modal fade" id="cancelSuccessModal" tabindex="-1"
		aria-labelledby="cancelSuccessLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content cancel-success-modal">
				<div class="modal-body text-center">
					<h5 class="successmessage mb-3">訂單已成功取消！</h5>
					<p style="margin-bottom: 25px">已將退款金額傳換成點數加入您的帳戶</p>
					<button type="button" class="gobackbtn" data-bs-dismiss="modal">確定</button>
				</div>
			</div>
		</div>
	</div>

	<!-- 評論彈窗 -->
	<div class="modal fade" id="reviewModal" tabindex="-1"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content p-4 commentbox">
				<div class="modal-header">
					<h5 class="modal-title comment-title">訂單評價</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="關閉"></button>
				</div>
				<div class="modal-body">
					<div class="stars text-center mb-3" id="starContainer">
						<!-- 星星區 -->
						<span class="star empty" data-value="1">&#9734;</span> <span
							class="star empty" data-value="2">&#9734;</span> <span
							class="star empty" data-value="3">&#9734;</span> <span
							class="star empty" data-value="4">&#9734;</span> <span
							class="star empty" data-value="5">&#9734;</span>
					</div>
					<textarea class="form-control" id="reviewText"
						placeholder="請留下評語..." rows="3"></textarea>
					<input type="hidden" id="selectedRating">
				</div>
				<div class="modal-footer">
					<button type="button" class="cancel-btn" data-bs-dismiss="modal">取消</button>
					<button type="button" id="submitReviewBtn"
						class="cancel-btn cancel-confirm">送出評價</button>
				</div>
			</div>
		</div>
	</div>


	<!-- Footer Area -->
	<footer id="footer" class="footer ">
		<!-- Footer Top -->
		<div class="footer-top">
			<div class="container">
				<div class="row">
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>About Us</h2>
							<p>
								我們是緯育 Tibame JAVA養成班 <br>TIA105 第一組, 成員有:
							</p>
							<p>邵柏中 陳華宣 林珍妮 高逢廷</p>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer f-link">
							<h2>Quick Links</h2>
							<ul>
								<li><a href="/staff/login"><i class="fa fa-caret-right"
										aria-hidden="true"></i>寵愛牠服務人員工作系統</a></li>
								<li><a href="/admin/login/page"><i
										class="fa fa-caret-right" aria-hidden="true"></i>寵愛牠平台方管理系統</a></li>
							</ul>

						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>Open Hours</h2>
							<p></p>
							<ul class="time-sidual">
								<li class="day">預約服務時間&nbsp;&nbsp;&nbsp;&nbsp;8.00 - 20.00</li>
								<li class="day">客服營業時間&nbsp;&nbsp;&nbsp;&nbsp;7.00 - 22.00</li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<div class="single-footer">
							<h2>Contact Us</h2>
							<p>客服信箱&nbsp;&nbsp;&nbsp;&nbsp; a0912622502@gmail.com</p>
							<p>客服專線&nbsp;&nbsp;&nbsp;&nbsp;(02) 5555-8858</p>
							<p style="margin-left: 70px">汪汪汪汪-幫幫我吧</p>

						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Footer Top -->
		<!-- Copyright -->
		<div class="copyright">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-12">
						<div class="copyright-content">
							<p>© Copyright 2025 | All Rights Reserved by Pawcares.com</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Copyright -->
	</footer>
	<!--/ End Footer Area -->

	<!-- jquery Min JS -->
	<script src="/js/jquery.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/js/add.js"></script>

	<!-- jquery Migrate JS -->
	<script src="/js/jquery-migrate-3.0.0.js"></script>
	<!-- jquery Ui JS -->
	<script src="/js/jquery-ui.min.js"></script>
	<!-- Easing JS -->
	<script src="/js/easing.js"></script>
	<!-- Color JS -->
	<script src="/js/colors.js"></script>
	<!-- Popper JS -->
	<script src="/js/popper.min.js"></script>
	<!-- Bootstrap Datepicker JS -->
	<script src="/js/bootstrap-datepicker.js"></script>
	<!-- Jquery Nav JS -->
	<script src="/js/jquery.nav.js"></script>
	<!-- Slicknav JS -->
	<script src="/js/slicknav.min.js"></script>
	<!-- ScrollUp JS -->
	<script src="/js/jquery.scrollUp.min.js"></script>
	<!-- Niceselect JS -->
	<script src="/js/niceselect.js"></script>
	<!-- Tilt Jquery JS -->
	<script src="/js/tilt.jquery.min.js"></script>
	<!-- Owl Carousel JS -->
	<script src="/js/owl-carousel.js"></script>
	<!-- counterup JS -->
	<script src="/js/jquery.counterup.min.js"></script>
	<!-- Steller JS -->
	<script src="/js/steller.js"></script>
	<!-- Wow JS -->
	<script src="/js/wow.min.js"></script>
	<!-- Magnific Popup JS -->
	<script src="/js/jquery.magnific-popup.min.js"></script>
	<!-- Counter Up CDN JS -->
	<script
		src="http://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
	<!-- Bootstrap JS -->
	<script src="/js/bootstrap.min.js"></script>
	<!-- Main JS -->
	<script src="/js/main.js"></script>
	<script src="/js/orderlist.js"></script>
	

</body>
</html>